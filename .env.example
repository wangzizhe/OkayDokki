# Quick Start Required Keys:
# - TELEGRAM_BOT_TOKEN
# - REPO_SNAPSHOT_ROOT
# - DEFAULT_REPO
# - AGENT_PROVIDER
# - AGENT_CLI_TEMPLATE
#
# ============================================================
# Required Configuration (set these first)
# ============================================================
# Telegram bot token
TELEGRAM_BOT_TOKEN=replace_me
# Root folder containing repo snapshots (absolute or relative path).
# Example: /Users/meow/Documents/OkayDokki/repos
REPO_SNAPSHOT_ROOT=./repos
# Default repo identifier under REPO_SNAPSHOT_ROOT.
# Example: if snapshot path is ./repos/okd-sandbox then set DEFAULT_REPO=okd-sandbox
DEFAULT_REPO=okd-sandbox
# Provider used for task/chat execution: codex | claude | gemini
AGENT_PROVIDER=codex
# Agent CLI command template used by task execution.
# Pick one from README "Provider Presets".
# Must include "$OKD_INTENT" so task intent is passed into the agent command.
AGENT_CLI_TEMPLATE=__SET_FROM_PROVIDER_PRESET__

# ============================================================
# Optional Configuration (set only when needed)
# ============================================================
# polling (easy self-hosted) | webhook
TELEGRAM_MODE=polling
# Required only when TELEGRAM_MODE=webhook
# Random shared secret used to verify Telegram webhook requests.
# TELEGRAM_WEBHOOK_SECRET=
# Required only when TELEGRAM_MODE=webhook
# Public HTTPS base URL of your deployment, e.g. https://okd.yourdomain.dev
# BASE_URL=

# Auth mode:
# - session: use provider CLI login session on this machine (recommended)
# - api: use API-key based integration
AGENT_AUTH_MODE=session
# Optional in session mode.
# Used only by `npm run preflight` to verify provider login state.
# Runtime can still work without this check command.
# Example: /Applications/Codex.app/Contents/Resources/codex login status
AGENT_SESSION_CHECK_CMD=

# Optional /chat CLI binary override.
# Usually leave empty: the binary is auto-derived from AGENT_CLI_TEMPLATE.
# Set this only if auto-derivation fails or you need an explicit binary path.
# Example: /Applications/Codex.app/Contents/Resources/codex
CHAT_CLI_BIN=
# Optional chat memory and guardrails
# Number of recent turns loaded as short memory per chat session.
CHAT_HISTORY_TURNS=6
# Max chars accepted for one chat input.
CHAT_MAX_PROMPT_CHARS=1200
# Chat command timeout in milliseconds.
CHAT_TIMEOUT_MS=45000

# Optional task delivery behavior
# rolling: continue from current branch chain; isolated: start from base branch each task
DELIVERY_STRATEGY=rolling
# Base branch used by isolated strategy and PR base.
BASE_BRANCH=main

# ============================================================
# Defaults (usually unchanged)
# ============================================================
PORT=3000
# SQLite DB path for task/chat state.
DATABASE_PATH=./okaydokki.db
# JSONL audit log output path.
AUDIT_LOG_PATH=./audit.jsonl
# Docker image used for sandbox test validation.
SANDBOX_IMAGE=node:22-bookworm-slim
# Default command run in sandbox validation.
DEFAULT_TEST_COMMAND=npm test
# Comma-separated allowlist of test commands permitted in sandbox.
ALLOWED_TEST_COMMANDS=npm test,npm run test
# Comma-separated blocked file path prefixes.
BLOCKED_PATH_PREFIXES=.github/workflows/,secrets/
# Max files changed allowed per task diff.
MAX_CHANGED_FILES=200
# Max diff byte size allowed per task.
MAX_DIFF_BYTES=500000
# true = reject binary patch content in diffs.
DISALLOW_BINARY_PATCH=true